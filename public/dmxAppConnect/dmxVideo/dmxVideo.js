/*!
 DMXzone Video
 Version: 1.0.2
 (c) 2022 Wappler.io
 @build 2022-07-22 11:56:35
 */
dmx.Component("video",{constructor:function(t,e){this.inView=this.inView.bind(this),this.updateState=dmx.throttle(this.updateState.bind(this)),dmx.BaseComponent.call(this,t,e)},initialData:{position:0,duration:0,ended:!1,muted:!1,paused:!1,playbackRate:1,volume:1,inView:!1},tag:"video",attributes:{src:{type:String,default:null},autopause:{type:Boolean,default:!1},playinview:{type:Boolean,default:!1}},methods:{position:function(t){this.$node.currentTime=t},playbackRate:function(t){this.$node.playbackRate=t},volume:function(t){this.$node.volume=t},load:function(t){this.$node.src=t,this.$node.load()},play:function(){this.$node.play()},pause:function(){this.$node.pause()}},render:function(t){dmx.BaseComponent.prototype.render.call(this,t),this.$node.ondurationchange=this.updateState,this.$node.onended=this.updateState,this.$node.onpause=this.updateState,this.$node.onplay=this.updateState,this.$node.onplaying=this.updateState,this.$node.onratechange=this.updateState,this.$node.onseeked=this.updateState,this.$node.ontimeupdate=this.updateState,this.$node.onvolumechange=this.updateState,window.IntersectionObserver?(this.observer=new IntersectionObserver((t=>{t.forEach((t=>{const e=t.isIntersecting;!e&&this.data.inView&&this.props.autopause&&this.$node.pause(),e&&!this.data.inView&&this.props.playinview&&this.$node.play(),this.set("inView",e)}))})),this.observer.observe(this.$node)):(window.addEventListener("scroll",this.inView),window.addEventListener("resize",this.inView),this.inView()),this.update({}),this.updateState()},inView:function(){var t=this.$node.getBoundingClientRect(),e=t.bottom>0&&t.right>0&&t.top<(window.innerHeight||document.documentElement.clientHeight)&&t.left<(window.innerWidth||document.documentElement.clientWidth);!e&&this.data.inView&&this.props.autopause&&this.$node.pause(),e&&!this.data.inView&&this.props.playinview&&this.$node.play(),this.set("inView",e)},update:function(t){t.src!=this.props.src&&(this.$node.src=this.props.src,this.$node.load())},updateState:function(){this.set("position",this.$node.currentTime),this.set("duration",NaN==this.$node.duration?0:this.$node.duration),this.set("ended",this.$node.ended),this.set("muted",this.$node.muted),this.set("paused",this.$node.paused),this.set("playbackRate",this.$node.playbackRate),this.set("volume",this.$node.volume)},destroy:function(){window.IntersectionObserver?(this.observer.disconnect(),this.observer=null):(window.removeEventListener("scroll",this.inView),window.removeEventListener("resize",this.inView))}});
//# sourceMappingURL=../maps/dmxVideo.js.map
